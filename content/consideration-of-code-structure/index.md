---
emoji: 🧑🏻‍💻
title:  코드 구조화에 대한 고찰
date: '2022-11-26'
author: HyunSang Park
tags: ["Programing"]
categories: Programing
---
제가 예전부터 프로그래밍을 하면서 궁금했던 점이 있습니다. "과연 올바른 Code Structure(코드 구조화)는 무엇인가"는 무엇인가에 대해서 궁금증과 의문점이 드는 부분이 있어서 작성하게 되었습니다.  

## 내가 생각하는 구조화는
저는 프로그래밍을 하면서 반복적인 코드 또는 다른 기능에서도 사용되는 코드(Ex. A,B를 만들면서 A를 먼저 만들며, A와 B를 함께 사용되는 코드가 있다면) 패키지를 만들어서 개발을 진행하고 있습니다.  

하지만 여기서! 이것저것 패키지가 엮여있다면 코드 구조화가 되는 것이 아니라 코드르 더 복잡하게 만든다라고 생각합니다. 예전에 프로그래밍을 할 때에는 하나의 코드 파일에 다양한 함수를 만들어서 이것저것 만들어 보곤 했습니다.   
프로그래밍을 하면서 항상 궁금했는데 과연 코드 구조가 복잡해지면 어떻게 해야할지, 그리고 복잡해지지 않기 위해서 어떻게 해야할지에 대해서 중점적으로 이야기 해 보고자 합니다.  

## 잠깐만 코드를 구조화 시키기 전에
제가 코드를 구조화 시키기 전에 꼭 지키는 못하지만 지키려고 노력하는 몇 가지 항목들이 있습니다.  

1. **가독성** - 가독성은 프로그래밍을 하면서 중요한 부분입니다. 코드는 자신을 위해서만 작성하는 것이 아니라 협업을 하는 분들과 함께 작업하기에 중요하다고 생각합니다.
2. **복잡한 구조는 지양하자.** - 복잡한 구조로 개발하는 경우 코드를 이해하거나 새로운 기능을 추가할 때 걸림돌이 될 수도 있습니다. 
3. **주석을 꼭 달고 함께 하는 분들이 이해하기 싶게 하자.** - 가독성에서 설명했듯이 코드는 자신을 위해서만 작성하는 것이 아니므로 다양한 분들께서 이해할 수 있도록 코드에 대한 주석은 중요하다고 봅니다. 하지만 주석도 과하면 코드를 이해도 하기 전에 질려버릴 수도 있으니 항상 간결하게 작성하는 것을 추천 드립니다. [주석을 잘쓰는 방법 : 주석에 담아야하는 내용 (1/2)](https://developside.tistory.com/14)를 한 번 보시는 것을 추천드립니다.
4. **통일성 있는 매개변수 타입** - 매개변수는 `String`이지만 호출하는 코드에서는 `UUID` 등 다른 타입을 사용하는 경우 그와 관련된 코드가 늘어나게 됩니다. 저는 항상 통일성 있는 매개변수 타입을 선호하고 있습니다.

## 어떻게 하면 코드를 잘 구조화 시킬 수 있을까?
제가 생각하는 코드를 구조화 시키는 방법은 자주 사용되는 기능을 함수 단위로 묶는 방법을 선호하고 있습니다.  

만약 사용자와 관련된 회원가입 기능을 개발한다면 무엇이 필요할까요?  

1. 사용자의 요청을 받는 JSON BodyParser
2. 사용자의 정보를 확인하는 단계
  - 동일한 이메일 주소 또는 전화번호가 있을지 확인
3. 사용자가 입력한 비밀번호를 암호화 하는 단계
4. 사용자의 요청에서 필요한 정보만 데이터베이스에 저장하기
    - 필요한 정보만 추려서 데이터베이스에 저장
5. 사용자에게 응답

위와 같이 회원가입 기능을 만드는데 추상적으로 필요한 단계는 총 5단계입니다.  
추상적으로 작성하였기에 더 많은 코드가 필요할 수도 있습니다.  
그럼 위와 같은 로직을 개발하기 위해서는 더 자세하게 필요한 것들을 나열해 봅시다.

1. 사용자의 요청을 받는 JSON BodyParser - 메인 코드 파일에 작성.
    - 백엔드 프레임워크마다 JSON BodyParser이 다르며, 세세하게 코드 구조를 만들 필요가 없기에 메인 코드 파일에 작성합니다.
2. 사용자의 정보를 확인하는 단계 - 일부 패키지화 필요.
    - 데이터베이스에 대한 패키지화가 필요합니다. 이미 등록된 있는 이메일 주소와 전화번호에 대해서 검색할 수 있는 기능이 필요합니다. 메인 패키지에서 데이터베이스 패키지로 사용자가 입력한 정보를 넘겨주어야 합니다.  
      - 만약 여기서 동일한 정보가 이미 등록되어 있다면 사용자에게 이미 등록되어 있는 정보라 응답 해야합니다.
3. 사용자가 입력한 비밀번호를 암호화하는 단계 - 일부 패키지화 필요.
    - 코드를 작성하는 방식에 대해서 다른 분들과 이견이 있을 수도 있습니다. 반복적으로 사용되고 다양한 기능들에서 사용되기에 따로 패키지화 합니다.  
4. 사용자의 요청에서 필요한 정보만 데이터베이스에 저장하기 - 패키지화
   - 사용자가 입력한 정보에 대해서 가공이 완료되었다면 가공된 정보를 저장할 수 있는 기능을 개발하여야 합니다. 
5. 요청한 사용자에게 응답. - 응답 구조체만 정의
    - 메인 코드 파일이나 혹은 다른 코드 파일에 구조체를 정의하여 사용자에게 어떻게 응답할지에 대해서 정의하며, 개발합니다.  

## 마치며
위와 같은 기준으로 저는 코드 구조화를 하고 있습니다. 더 올바른 방법을 위해서 다양한 자료들을 항상 찾아보고 다양한 방법을 코드에 적용 시켜보고자 합니다.   
더 좋은 방법이 있으면 업데이트 예정할 입니다 :) - [`golang-standards/project-layout`](https://github.com/golang-standards/project-layout/blob/master/README_ko.md)를 참고하여 작성하겠습니다.

## 참고한 자료
- [좋은 개발자로 가는길 — 구조화된 코드](https://han7096.medium.com/%EC%A2%8B%EC%9D%80-%EA%B0%9C%EB%B0%9C%EC%9E%90%EB%A1%9C-%EA%B0%80%EB%8A%94%EA%B8%B8-%EA%B5%AC%EC%A1%B0%ED%99%94%EB%90%9C-%EC%BD%94%EB%93%9C-5d03116dc78b)
- [개발 초보도 바로 적용해 볼 수 있는 좋은 코드 작성법](https://velog.io/@couchcoding/%EA%B0%9C%EB%B0%9C-%EC%B4%88%EB%B3%B4%EB%8F%84-%EB%B0%94%EB%A1%9C-%EC%A0%81%EC%9A%A9%ED%95%B4-%EB%B3%BC-%EC%88%98-%EC%9E%88%EB%8A%94-%EC%A2%8B%EC%9D%80-%EC%BD%94%EB%93%9C-%EC%9E%91%EC%84%B1%EB%B2%95)
- [`golang-standards/project-layout`](https://github.com/golang-standards/project-layout/blob/master/README_ko.md)

---

- 2022.11.26 - 처음으로 작성함.