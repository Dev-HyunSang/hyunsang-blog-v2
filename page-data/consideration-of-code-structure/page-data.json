{"componentChunkName":"component---src-templates-blog-template-js","path":"/consideration-of-code-structure/","result":{"data":{"cur":{"id":"693d4dac-5a7f-52b3-97c5-703e57b6b91d","html":"<p>제가 예전부터 프로그래밍을 하면서 궁금했던 점이 있습니다. “과연 올바른 Code Structure(코드 구조화)는 무엇인가”는 무엇인가에 대해서 궁금증과 의문점이 드는 부분이 있어서 작성하게 되었습니다.</p>\n<h2 id=\"내가-생각하는-구조화는\" style=\"position:relative;\"><a href=\"#%EB%82%B4%EA%B0%80-%EC%83%9D%EA%B0%81%ED%95%98%EB%8A%94-%EA%B5%AC%EC%A1%B0%ED%99%94%EB%8A%94\" aria-label=\"내가 생각하는 구조화는 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>내가 생각하는 구조화는</h2>\n<p>저는 프로그래밍을 하면서 반복적인 코드 또는 다른 기능에서도 사용되는 코드(Ex. A,B를 만들면서 A를 먼저 만들며, A와 B를 함께 사용되는 코드가 있다면) 패키지를 만들어서 개발을 진행하고 있습니다.</p>\n<p>하지만 여기서! 이것저것 패키지가 엮여있다면 코드 구조화가 되는 것이 아니라 코드르 더 복잡하게 만든다라고 생각합니다. 예전에 프로그래밍을 할 때에는 하나의 코드 파일에 다양한 함수를 만들어서 이것저것 만들어 보곤 했습니다.<br>\n프로그래밍을 하면서 항상 궁금했는데 과연 코드 구조가 복잡해지면 어떻게 해야할지, 그리고 복잡해지지 않기 위해서 어떻게 해야할지에 대해서 중점적으로 이야기 해 보고자 합니다.</p>\n<h2 id=\"잠깐만-코드를-구조화-시키기-전에\" style=\"position:relative;\"><a href=\"#%EC%9E%A0%EA%B9%90%EB%A7%8C-%EC%BD%94%EB%93%9C%EB%A5%BC-%EA%B5%AC%EC%A1%B0%ED%99%94-%EC%8B%9C%ED%82%A4%EA%B8%B0-%EC%A0%84%EC%97%90\" aria-label=\"잠깐만 코드를 구조화 시키기 전에 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>잠깐만 코드를 구조화 시키기 전에</h2>\n<p>제가 코드를 구조화 시키기 전에 꼭 지키는 못하지만 지키려고 노력하는 몇 가지 항목들이 있습니다.</p>\n<ol>\n<li><strong>가독성</strong> - 가독성은 프로그래밍을 하면서 중요한 부분입니다. 코드는 자신을 위해서만 작성하는 것이 아니라 협업을 하는 분들과 함께 작업하기에 중요하다고 생각합니다.</li>\n<li><strong>복잡한 구조는 지양하자.</strong> - 복잡한 구조로 개발하는 경우 코드를 이해하거나 새로운 기능을 추가할 때 걸림돌이 될 수도 있습니다.</li>\n<li><strong>주석을 꼭 달고 함께 하는 분들이 이해하기 싶게 하자.</strong> - 가독성에서 설명했듯이 코드는 자신을 위해서만 작성하는 것이 아니므로 다양한 분들께서 이해할 수 있도록 코드에 대한 주석은 중요하다고 봅니다. 하지만 주석도 과하면 코드를 이해도 하기 전에 질려버릴 수도 있으니 항상 간결하게 작성하는 것을 추천 드립니다. <a href=\"https://developside.tistory.com/14\">주석을 잘쓰는 방법 : 주석에 담아야하는 내용 (1/2)</a>를 한 번 보시는 것을 추천드립니다.</li>\n<li><strong>통일성 있는 매개변수 타입</strong> - 매개변수는 <code class=\"language-text\">String</code>이지만 호출하는 코드에서는 <code class=\"language-text\">UUID</code> 등 다른 타입을 사용하는 경우 그와 관련된 코드가 늘어나게 됩니다. 저는 항상 통일성 있는 매개변수 타입을 선호하고 있습니다.</li>\n</ol>\n<h2 id=\"어떻게-하면-코드를-잘-구조화-시킬-수-있을까\" style=\"position:relative;\"><a href=\"#%EC%96%B4%EB%96%BB%EA%B2%8C-%ED%95%98%EB%A9%B4-%EC%BD%94%EB%93%9C%EB%A5%BC-%EC%9E%98-%EA%B5%AC%EC%A1%B0%ED%99%94-%EC%8B%9C%ED%82%AC-%EC%88%98-%EC%9E%88%EC%9D%84%EA%B9%8C\" aria-label=\"어떻게 하면 코드를 잘 구조화 시킬 수 있을까 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>어떻게 하면 코드를 잘 구조화 시킬 수 있을까?</h2>\n<p>제가 생각하는 코드를 구조화 시키는 방법은 자주 사용되는 기능을 함수 단위로 묶는 방법을 선호하고 있습니다.</p>\n<p>만약 사용자와 관련된 회원가입 기능을 개발한다면 무엇이 필요할까요?</p>\n<ol>\n<li>사용자의 요청을 받는 JSON BodyParser</li>\n<li>사용자의 정보를 확인하는 단계</li>\n</ol>\n<ul>\n<li>동일한 이메일 주소 또는 전화번호가 있을지 확인</li>\n</ul>\n<ol start=\"3\">\n<li>사용자가 입력한 비밀번호를 암호화 하는 단계</li>\n<li>사용자의 요청에서 필요한 정보만 데이터베이스에 저장하기\n<ul>\n<li>필요한 정보만 추려서 데이터베이스에 저장</li>\n</ul>\n</li>\n<li>사용자에게 응답</li>\n</ol>\n<p>위와 같이 회원가입 기능을 만드는데 추상적으로 필요한 단계는 총 5단계입니다.<br>\n추상적으로 작성하였기에 더 많은 코드가 필요할 수도 있습니다.<br>\n그럼 위와 같은 로직을 개발하기 위해서는 더 자세하게 필요한 것들을 나열해 봅시다.</p>\n<ol>\n<li>사용자의 요청을 받는 JSON BodyParser - 메인 코드 파일에 작성.\n<ul>\n<li>백엔드 프레임워크마다 JSON BodyParser이 다르며, 세세하게 코드 구조를 만들 필요가 없기에 메인 코드 파일에 작성합니다.</li>\n</ul>\n</li>\n<li>사용자의 정보를 확인하는 단계 - 일부 패키지화 필요.\n<ul>\n<li>데이터베이스에 대한 패키지화가 필요합니다. 이미 등록된 있는 이메일 주소와 전화번호에 대해서 검색할 수 있는 기능이 필요합니다. 메인 패키지에서 데이터베이스 패키지로 사용자가 입력한 정보를 넘겨주어야 합니다.\n<ul>\n<li>만약 여기서 동일한 정보가 이미 등록되어 있다면 사용자에게 이미 등록되어 있는 정보라 응답 해야합니다.</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>사용자가 입력한 비밀번호를 암호화하는 단계 - 일부 패키지화 필요.\n<ul>\n<li>코드를 작성하는 방식에 대해서 다른 분들과 이견이 있을 수도 있습니다. 반복적으로 사용되고 다양한 기능들에서 사용되기에 따로 패키지화 합니다.</li>\n</ul>\n</li>\n<li>사용자의 요청에서 필요한 정보만 데이터베이스에 저장하기 - 패키지화\n<ul>\n<li>사용자가 입력한 정보에 대해서 가공이 완료되었다면 가공된 정보를 저장할 수 있는 기능을 개발하여야 합니다.</li>\n</ul>\n</li>\n<li>요청한 사용자에게 응답. - 응답 구조체만 정의\n<ul>\n<li>메인 코드 파일이나 혹은 다른 코드 파일에 구조체를 정의하여 사용자에게 어떻게 응답할지에 대해서 정의하며, 개발합니다.</li>\n</ul>\n</li>\n</ol>\n<h2 id=\"마치며\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\" aria-label=\"마치며 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>마치며</h2>\n<p>위와 같은 기준으로 저는 코드 구조화를 하고 있습니다. 더 올바른 방법을 위해서 다양한 자료들을 항상 찾아보고 다양한 방법을 코드에 적용 시켜보고자 합니다.<br>\n더 좋은 방법이 있으면 업데이트 예정할 입니다 :) - <a href=\"https://github.com/golang-standards/project-layout/blob/master/README_ko.md\"><code class=\"language-text\">golang-standards/project-layout</code></a>를 참고하여 작성하겠습니다.</p>\n<h2 id=\"참고한-자료\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0%ED%95%9C-%EC%9E%90%EB%A3%8C\" aria-label=\"참고한 자료 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고한 자료</h2>\n<ul>\n<li><a href=\"https://han7096.medium.com/%EC%A2%8B%EC%9D%80-%EA%B0%9C%EB%B0%9C%EC%9E%90%EB%A1%9C-%EA%B0%80%EB%8A%94%EA%B8%B8-%EA%B5%AC%EC%A1%B0%ED%99%94%EB%90%9C-%EC%BD%94%EB%93%9C-5d03116dc78b\">좋은 개발자로 가는길 — 구조화된 코드</a></li>\n<li><a href=\"https://velog.io/@couchcoding/%EA%B0%9C%EB%B0%9C-%EC%B4%88%EB%B3%B4%EB%8F%84-%EB%B0%94%EB%A1%9C-%EC%A0%81%EC%9A%A9%ED%95%B4-%EB%B3%BC-%EC%88%98-%EC%9E%88%EB%8A%94-%EC%A2%8B%EC%9D%80-%EC%BD%94%EB%93%9C-%EC%9E%91%EC%84%B1%EB%B2%95\">개발 초보도 바로 적용해 볼 수 있는 좋은 코드 작성법</a></li>\n<li><a href=\"https://github.com/golang-standards/project-layout/blob/master/README_ko.md\"><code class=\"language-text\">golang-standards/project-layout</code></a></li>\n</ul>\n<hr>\n<ul>\n<li>2022.11.26 - 처음으로 작성함.</li>\n</ul>\n<div class=\"table-of-contents\">\n<ul>\n<li><a href=\"#%EB%82%B4%EA%B0%80-%EC%83%9D%EA%B0%81%ED%95%98%EB%8A%94-%EA%B5%AC%EC%A1%B0%ED%99%94%EB%8A%94\">내가 생각하는 구조화는</a></li>\n<li><a href=\"#%EC%9E%A0%EA%B9%90%EB%A7%8C-%EC%BD%94%EB%93%9C%EB%A5%BC-%EA%B5%AC%EC%A1%B0%ED%99%94-%EC%8B%9C%ED%82%A4%EA%B8%B0-%EC%A0%84%EC%97%90\">잠깐만 코드를 구조화 시키기 전에</a></li>\n<li><a href=\"#%EC%96%B4%EB%96%BB%EA%B2%8C-%ED%95%98%EB%A9%B4-%EC%BD%94%EB%93%9C%EB%A5%BC-%EC%9E%98-%EA%B5%AC%EC%A1%B0%ED%99%94-%EC%8B%9C%ED%82%AC-%EC%88%98-%EC%9E%88%EC%9D%84%EA%B9%8C\">어떻게 하면 코드를 잘 구조화 시킬 수 있을까?</a></li>\n<li><a href=\"#%EB%A7%88%EC%B9%98%EB%A9%B0\">마치며</a></li>\n<li><a href=\"#%EC%B0%B8%EA%B3%A0%ED%95%9C-%EC%9E%90%EB%A3%8C\">참고한 자료</a></li>\n</ul>\n</div>","excerpt":"제가 예전부터 프로그래밍을 하면서 궁금했던 점이 있습니다. “과연 올바른 Code Structure(코드 구조화)는 무엇인가”는 무엇인가에 대해서 궁금증과 의문점이 드는 부분이 있어서 작성하게 되었습니다. 내가 생각하는 구조화는 저는 프로그래밍을 하면서 반복적인 코드 또는 다른 기능에서도 사용되는 코드(Ex. A,B를 만들면서 A를 먼저 만들며, A와 B를 함께 사용되는 코드가 있다면) 패키지를 만들어서 개발을 진행하고 있습니다. 하지만 여기서! 이것저것 패키지가 엮여있다면 코드 구조화가 되는 것이 아니라 코드르 더 복잡하게 만든다라고 생각합니다. 예전에 프로그래밍을 할 때에는 하나의 코드 파일에 다양한 함수를 만들어서 이것저것 만들어 보곤 했습니다. 프로그래밍을 하면서 항상 궁금했는데 과연 코드 구조가 복잡해지면 어떻게 해야할지, 그리고 복잡해지지 않기 위해서 어떻게 해야할지에 대해서 중점적으로 이야기 해 보고자 합니다. 잠깐만 코드를 구조화 시키기 전에 제가 코드를 구조화 시키…","frontmatter":{"date":"November 26, 2022","title":"코드 구조화에 대한 고찰","categories":"Programing","author":"HyunSang Park","emoji":"🧑🏻‍💻"},"fields":{"slug":"/consideration-of-code-structure/"}},"next":{"id":"a8379057-9a99-5b06-81df-e520481e39b0","html":"<p>요즘 회사에서 새로운 프로젝트를 <a href=\"https://www.rust-lang.org/\">Rust</a>으로 진행한다고 해서 Rust를 공부하던 도중 제가 예전에도 지금에도 어려워하고 있는 메모리를 조금 더 깊게 공부하고 싶다는 생각이 들어서 제가 메인으로 사용하는 Go언어에서 메모리는 어떻게 사용될지 정리해 보고자 이렇게 글을 작성합니다.</p>\n<blockquote>\n<p><em><strong>본 글은 GC(Garbage Collection)에 대해서 중점적으로 서술합니다.</strong></em><br>\n<strong><a href=\"https://velog.io/@kineo2k/Go-%EC%96%B8%EC%96%B4%EC%9D%98-GC\">Go 언어의 GC</a>를 참고하여 작성하였습니다.</strong></p>\n</blockquote>\n<p><img src=\"https://miro.medium.com/max/1400/1*RUBHi-DlwpigyGLRDGAEIg.webp\" alt=\"쓰레기 버리는 Gopher\"></p>\n<h2 id=\"가비지-컬렉션이란\" style=\"position:relative;\"><a href=\"#%EA%B0%80%EB%B9%84%EC%A7%80-%EC%BB%AC%EB%A0%89%EC%85%98%EC%9D%B4%EB%9E%80\" aria-label=\"가비지 컬렉션이란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>가비지 컬렉션이란</h2>\n<p>본격적으로 들어가기 전에 가비지 컬렉션(GC, Garbage Collection)를 알아보고자 합니다.<br>\n가비지는 <strong>유효하지 않는 메모리 주소</strong>, <strong>해제되지 않은 영역</strong>를 의미합니다.<br>\n프로그래밍 언어에서는 통상 ‘Danling Ojbect’으로 불리고 있으며, Java나 Go에서는 Garbage라는 용어를 사용하고 있습니다.</p>\n<p>옛날 언어들은 BASIC처럼 동적인 메모리 할당 기능이 없어서 FORTRAN, C언어처럼 프로그래머가 할당한 뒤 수동으로 해제 해야하는 방식을 사용했습니다.<br>\n프로그래머가 메모리를 할당해놓고 필요없어진 뒤에도 해제를 안 해서 메모리 누수가 생기거나, 혹은 거꾸로 해제했던 메모리를 실수로 다시 사용하거나, 해제했던 메모리를 또 해제한다거나 하는 온갖 실수가 일어나서 오류가 많이 발생하였습니다.</p>\n<p>이러한 문제들을 해결하기 위해서 제시된 방법이 가비지 컬렉션입니다. 가비지 컬렉션 기능을 채택한 언어의 경우에는 가비지 컬렉션에서 제공하는 할당과 해제를 이용하여 자동적으로 프로그램이 실행되며 생기는 쓸모없어지는 메모리들을 수집하고 관리해줍니다.</p>\n<p>메모리와 관련되어서 <a href=\"https://showx123.tistory.com/59\">double free 취약점</a>, <a href=\"https://nextline.tistory.com/81\">Memory Corruption 취약점</a> 등의 보안적 문제가 발생할 수 있습니다.</p>\n<h2 id=\"golang-with-gc\" style=\"position:relative;\"><a href=\"#golang-with-gc\" aria-label=\"golang with gc permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Golang with GC</h2>\n<p><a href=\"https://pkg.go.dev/runtime\">runtime</a> 패키지의 <a href=\"https://go.dev/src/runtime/mgc.go\"><code class=\"language-text\">mgc.go</code></a>에 서술되어 있는 Go언어 GC(Garbage Collection)에 대한 설명입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"go\"><pre class=\"language-go\"><code class=\"language-go\"><span class=\"token comment\">// Garbage collector (GC).</span>\n<span class=\"token comment\">//</span>\n<span class=\"token comment\">// The GC runs concurrently with mutator threads, is type accurate (aka precise), allows multiple</span>\n<span class=\"token comment\">// GC thread to run in parallel. It is a concurrent mark and sweep that uses a write barrier. It is</span>\n<span class=\"token comment\">// non-generational and non-compacting. Allocation is done using size segregated per P allocation</span>\n<span class=\"token comment\">// areas to minimize fragmentation while eliminating locks in the common case.</span></code></pre></div>\n<h3 id=\"삼색-표시-후-쓸어담기-알고리즘\" style=\"position:relative;\"><a href=\"#%EC%82%BC%EC%83%89-%ED%91%9C%EC%8B%9C-%ED%9B%84-%EC%93%B8%EC%96%B4%EB%8B%B4%EA%B8%B0-%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98\" aria-label=\"삼색 표시 후 쓸어담기 알고리즘 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>삼색 표시 후 쓸어담기 알고리즘</h3>\n<p>Go언어의 GC는 <strong>삼색 표시 후 쓸어담기 알고리즘</strong>를 사용합니다.<br>\n먼저 <strong>삼색 집합</strong>에 대해서 알아봐야겠죠?</p>\n<ul>\n<li>흰색 집합(White set): 프로그램에서 더 이상 접근할 수 없어서 GC 대상이 되는 객체</li>\n<li>검은색 집합(Black set): 프로그램이 사용하고 있고, 흰색 집합의 객체에 대한 참고가 없는 객체. 흰색 집합의 객체가 검은색 집합의 객체의 참조를 가져도 문제가 되지 않음.</li>\n<li>회색 집합(Grey set): 프로그램이 사용하고 있고, 흰색 집합의 객체를 가리킬 수도 있어서 검사를 진행해야하는 객체</li>\n</ul>\n<p>삼색 표시 후 쓸어담기 알고리즘은 아래와 같은 과정으로 진행됩니다.</p>\n<ol>\n<li>가비지 컬렉션은 모든 객체를 흰색으로 칠한 상태에서 시작합니다.</li>\n<li>GC가 모든 루트 객체(Root Object)를 방문해서 회색으로 칠합니다. 여기서 루트 객체란, 스택이나 전역 변수처럼 애플리케이션에서 직접 접근할 수 있는 오브젝트를 이야기합니다.</li>\n<li>GC는 회색 집합의 객체를 하나씩 검은색으로 변경하면서 그 객체가 가리키는 희색 집합 객체가 확인되면 해당 객체를 회색으로 칠합니다.</li>\n<li>3번의 작업을 회색 집합에 객체가 없어질 때까지 반복합니다. 이 작업이 끝나면 더 이상 접근할 수 없는 객체만 희색 집합에 남게 됩니다.</li>\n<li>흰색 집합의 객체에 할당된 메모리 공간을 회수하여 메모리를 확보합니다.</li>\n</ol>\n<p><img src=\"https://velog.velcdn.com/images%2Fkineo2k%2Fpost%2F9e9edd37-9349-4557-a545-06b0969e1174%2Ftricolor-mark-and-sweep.png\" alt=\"\"></p>\n<p>GC 수행 중 **뮤테이터 스레드(Mutator threads)**가 힙에 객체 참조를 변경한다면 어떻게 될까요?<br>\n뮤테이터 스레드(Mutator threads)란 GC를 수행하는 스레드를 제외한 우리가 작성한 애플리케이션의 스테드를 의미합니다.<br>\n이 경우 <strong>GC를 수행하는 객체의 정합성을 보장할 수 없어서 문제가 발생</strong>할 수 있습니다. 그래서 GC는 안전하고 정확한 GC 수행을 위해서 뮤테이터 스레드를 중지 시킵니다. 뮤테이터 스레드를 중지한 상태를 Stop the world(STW)라고 부르며, 가비지 컬렉션 안전점(Garbage collection safe−point)이 만들어집니다.<br>\n또한, 이것이 <strong>애플리케이션 성능 저하의 주요 원인</strong>이 됩니다.</p>\n<p>Go언어의 GC는 채널(Channel) 변수에 대해서도 동일하게 메모리 회수 작업을 수행합니다. 더 이상 접근할 수 없는 채널이라면 해당 채널이 열려 있는 상태더라도 메모리에서 해제됩니다. 또한 Java 등 다른 언어처럼 Go언어에서도 직접 GC를 실행할 수 있도록 <code class=\"language-text\">runtime.GC()</code> 함수를 제공합니다.<br>\n하지만 GC 호출에는 대가가 따르는 만큼 <code class=\"language-text\">runtime.GC()</code> 호출에는 GC에 대한 깊은 이해와 주의가 필요합니다.</p>\n<h2 id=\"참고한-자료\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0%ED%95%9C-%EC%9E%90%EB%A3%8C\" aria-label=\"참고한 자료 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고한 자료</h2>\n<ul>\n<li><a href=\"https://engineering.linecorp.com/ko/blog/go-gc/\">Go 언어의 GC에 대해</a></li>\n<li><a href=\"https://medium.com/a-journey-with-go/go-how-does-the-garbage-collector-watch-your-application-dbef99be2c35\">Go: How Does the Garbage Collector Watch Your Application?</a></li>\n<li><a href=\"https://velog.io/@kineo2k/Go-%EC%96%B8%EC%96%B4%EC%9D%98-GC\">Go 언어의 GC</a></li>\n<li><a href=\"https://www.developer.com/languages/tricolor-algorithm-golang/\">Tricolor Algorithms in Go</a></li>\n</ul>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%EA%B0%80%EB%B9%84%EC%A7%80-%EC%BB%AC%EB%A0%89%EC%85%98%EC%9D%B4%EB%9E%80\">가비지 컬렉션이란</a></p>\n</li>\n<li>\n<p><a href=\"#golang-with-gc\">Golang with GC</a></p>\n<ul>\n<li><a href=\"#%EC%82%BC%EC%83%89-%ED%91%9C%EC%8B%9C-%ED%9B%84-%EC%93%B8%EC%96%B4%EB%8B%B4%EA%B8%B0-%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98\">삼색 표시 후 쓸어담기 알고리즘</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%B0%B8%EA%B3%A0%ED%95%9C-%EC%9E%90%EB%A3%8C\">참고한 자료</a></p>\n</li>\n</ul>\n</div>","frontmatter":{"date":"November 24, 2022","title":"Go언어와 메모리","categories":"Golang","author":"HyunSang Park","emoji":"🧑🏻‍💻"},"fields":{"slug":"/golang-and-memory/"}},"prev":{"id":"721c4b97-926e-519d-af03-6b1893094904","html":"<p>본 게시물에서는 제가 Rust를 공부하면서 다양한 오류를 기록하고 오류 해결 방법에 대해서 기록합니다.</p>\n<h2 id=\"code-classlanguage-texterror-linking-with-cc-failed-exit-status-1code\" style=\"position:relative;\"><a href=\"#code-classlanguage-texterror-linking-with-cc-failed-exit-status-1code\" aria-label=\"code classlanguage texterror linking with cc failed exit status 1code permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><code class=\"language-text\">error: linking with cc failed: exit status 1</code></h2>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ <span class=\"token function\">cargo</span> <span class=\"token function\">install</span> diesel_cli --no-default-features <span class=\"token parameter variable\">--features</span> postgres\n    Updating crates.io index\n  Installing diesel_cli v2.0.1\n   Compiling proc-macro2 v1.0.47\n   Compiling unicode-ident v1.0.5\n   Compiling quote v1.0.21\n   Compiling syn v1.0.105\n   Compiling autocfg v1.1.0\n   Compiling serde v1.0.149\n   Compiling serde_derive v1.0.149\n   Compiling version_check v0.9.4\n   Compiling libc v0.2.138\n   Compiling memchr v2.5.0\n   Compiling core-foundation-sys v0.8.3\n   Compiling bitflags v1.3.2\n   Compiling pq-sys v0.4.7\n   Compiling tinyvec_macros v0.1.0\n   Compiling os_str_bytes v6.4.1\n   Compiling hashbrown v0.12.3\n   Compiling percent-encoding v2.2.0\n   Compiling tinyvec v1.6.0\n   Compiling overload v0.1.1\n   Compiling itoa v1.0.4\n   Compiling unicode-bidi v0.3.8\n   Compiling clap_lex v0.2.4\n   Compiling proc-macro-error-attr v1.0.4\n   Compiling proc-macro-error v1.0.4\n   Compiling num-traits v0.2.15\n   Compiling indexmap v1.9.2\n   Compiling num-integer v0.1.45\n   Compiling unicode-normalization v0.1.22\n   Compiling strsim v0.10.0\n   Compiling regex-syntax v0.6.28\n   Compiling textwrap v0.16.0\n   Compiling byteorder v1.4.3\n   Compiling termcolor v1.1.3\n   Compiling idna v0.3.0\n   Compiling aho-corasick v0.7.20\n   Compiling form_urlencoded v1.1.0\n   Compiling iana-time-zone v0.1.53\n   Compiling nu-ansi-term v0.46.0\n   Compiling heck v0.4.0\n   Compiling dotenvy v0.15.6\n   Compiling atty v0.2.14\n   Compiling url v2.3.1\n   Compiling diffy v0.3.0\n   Compiling clap v3.2.23\n   Compiling regex v1.7.0\n   Compiling chrono v0.4.23\n   Compiling clap_complete v3.2.5\n   Compiling diesel_derives v2.0.1\n   Compiling diesel v2.0.2\n   Compiling toml v0.5.9\n   Compiling serde_regex v1.1.0\n   Compiling migrations_internals v2.0.0\n   Compiling migrations_macros v2.0.0\n   Compiling diesel_migrations v2.0.0\n   Compiling diesel_cli v2.0.1\nerror: linking with <span class=\"token variable\"><span class=\"token variable\">`</span>cc<span class=\"token variable\">`</span></span> failed: <span class=\"token builtin class-name\">exit</span> status: <span class=\"token number\">1</span>\n  <span class=\"token operator\">|</span>\n  <span class=\"token operator\">=</span> note: <span class=\"token string\">\"cc\"</span> <span class=\"token string\">\"-arch\"</span> <span class=\"token string\">\"x86_64\"</span> <span class=\"token string\">\"-m64\"</span> <span class=\"token string\">\"/var/folders/pn/cxqkjl412hx7gztrg41kc_jr0000gn/T/rustcQEP129/symbols.o\"</span> <span class=\"token string\">\"/var/folders/pn/cxqkjl412hx7gztrg41kc_jr0000gn/T/cargo-installZb1ySO/release/deps/diesel-2239d0258e7baf20.diesel.480443c6-cgu.0.rcgu.o\"</span> <span class=\"token string\">\"/var/folders/pn/cxqkjl412hx7gztrg41kc_jr0000gn/T/cargo-installZb1ySO/release/deps/diesel-2239d0258e7baf20.diesel.480443c6-cgu.1.rcgu.o\"</span> <span class=\"token string\">\"/var/folders/pn/cxqkjl412hx7gztrg41kc_jr0000gn/T/cargo-installZb1ySO/release/deps/diesel-2239d0258e7baf20.diesel.480443c6-cgu.10.rcgu.o\"</span> <span class=\"token string\">\"/var/folders/pn/cxqkjl412hx7gztrg41kc_jr0000gn/T/cargo-installZb1ySO/release/deps/diesel-2239d0258e7baf20.diesel.480443c6-cgu.11.rcgu.o\"</span> <span class=\"token string\">\"/var/folders/pn/cxqkjl412hx7gztrg41kc_jr0000gn/T/cargo-installZb1ySO/release/deps/diesel-2239d0258e7baf20.diesel.480443c6-cgu.12.rcgu.o\"</span> <span class=\"token string\">\"/var/folders/pn/cxqkjl412hx7gztrg41kc_jr0000gn/T/cargo-installZb1ySO/release/deps/diesel-2239d0258e7baf20.diesel.480443c6-cgu.13.rcgu.o\"</span> <span class=\"token string\">\"/var/folders/pn/cxqkjl412hx7gztrg41kc_jr0000gn/T/cargo-installZb1ySO/release/deps/diesel-2239d0258e7baf20.diesel.480443c6-cgu.14.rcgu.o\"</span> <span class=\"token string\">\"/var/folders/pn/cxqkjl412hx7gztrg41kc_jr0000gn/T/cargo-installZb1ySO/release/deps/diesel-2239d0258e7baf20.diesel.480443c6-cgu.15.rcgu.o\"</span> <span class=\"token string\">\"/var/folders/pn/cxqkjl412hx7gztrg41kc_jr0000gn/T/cargo-installZb1ySO/release/deps/diesel-2239d0258e7baf20.diesel.480443c6-cgu.2.rcgu.o\"</span> <span class=\"token string\">\"/var/folders/pn/cxqkjl412hx7gztrg41kc_jr0000gn/T/cargo-installZb1ySO/release/deps/diesel-2239d0258e7baf20.diesel.480443c6-cgu.3.rcgu.o\"</span> <span class=\"token string\">\"/var/folders/pn/cxqkjl412hx7gztrg41kc_jr0000gn/T/cargo-installZb1ySO/release/deps/diesel-2239d0258e7baf20.diesel.480443c6-cgu.4.rcgu.o\"</span> <span class=\"token string\">\"/var/folders/pn/cxqkjl412hx7gztrg41kc_jr0000gn/T/cargo-installZb1ySO/release/deps/diesel-2239d0258e7baf20.diesel.480443c6-cgu.5.rcgu.o\"</span> <span class=\"token string\">\"/var/folders/pn/cxqkjl412hx7gztrg41kc_jr0000gn/T/cargo-installZb1ySO/release/deps/diesel-2239d0258e7baf20.diesel.480443c6-cgu.6.rcgu.o\"</span> <span class=\"token string\">\"/var/folders/pn/cxqkjl412hx7gztrg41kc_jr0000gn/T/cargo-installZb1ySO/release/deps/diesel-2239d0258e7baf20.diesel.480443c6-cgu.7.rcgu.o\"</span> <span class=\"token string\">\"/var/folders/pn/cxqkjl412hx7gztrg41kc_jr0000gn/T/cargo-installZb1ySO/release/deps/diesel-2239d0258e7baf20.diesel.480443c6-cgu.8.rcgu.o\"</span> <span class=\"token string\">\"/var/folders/pn/cxqkjl412hx7gztrg41kc_jr0000gn/T/cargo-installZb1ySO/release/deps/diesel-2239d0258e7baf20.diesel.480443c6-cgu.9.rcgu.o\"</span> <span class=\"token string\">\"/var/folders/pn/cxqkjl412hx7gztrg41kc_jr0000gn/T/cargo-installZb1ySO/release/deps/diesel-2239d0258e7baf20.osyifqfmqijbdd2.rcgu.o\"</span> <span class=\"token string\">\"-L\"</span> <span class=\"token string\">\"/var/folders/pn/cxqkjl412hx7gztrg41kc_jr0000gn/T/cargo-installZb1ySO/release/deps\"</span> <span class=\"token string\">\"-L\"</span> <span class=\"token string\">\"/usr/local/Cellar/rust/1.65.0/lib/rustlib/x86_64-apple-darwin/lib\"</span> <span class=\"token string\">\"/private/var/folders/pn/cxqkjl412hx7gztrg41kc_jr0000gn/T/cargo-installZb1ySO/release/deps/libdiffy-feb686537b438f90.rlib\"</span> <span class=\"token string\">\"/private/var/folders/pn/cxqkjl412hx7gztrg41kc_jr0000gn/T/cargo-installZb1ySO/release/deps/libnu_ansi_term-f74bc2cae31b91ac.rlib\"</span> <span class=\"token string\">\"/private/var/folders/pn/cxqkjl412hx7gztrg41kc_jr0000gn/T/cargo-installZb1ySO/release/deps/liboverload-7f6962cb4b7800ad.rlib\"</span> <span class=\"token string\">\"/private/var/folders/pn/cxqkjl412hx7gztrg41kc_jr0000gn/T/cargo-installZb1ySO/release/deps/liburl-19a908c6fbc8fd14.rlib\"</span> <span class=\"token string\">\"/private/var/folders/pn/cxqkjl412hx7gztrg41kc_jr0000gn/T/cargo-installZb1ySO/release/deps/libidna-7a1f260ab1b75bb2.rlib\"</span> <span class=\"token string\">\"/private/var/folders/pn/cxqkjl412hx7gztrg41kc_jr0000gn/T/cargo-installZb1ySO/release/deps/libunicode_normalization-c73b01e29af39fc4.rlib\"</span> <span class=\"token string\">\"/private/var/folders/pn/cxqkjl412hx7gztrg41kc_jr0000gn/T/cargo-installZb1ySO/release/deps/libtinyvec-af6c0e25e69787b7.rlib\"</span> <span class=\"token string\">\"/private/var/folders/pn/cxqkjl412hx7gztrg41kc_jr0000gn/T/cargo-installZb1ySO/release/deps/libtinyvec_macros-37c2c358d67f30d7.rlib\"</span> <span class=\"token string\">\"/private/var/folders/pn/cxqkjl412hx7gztrg41kc_jr0000gn/T/cargo-installZb1ySO/release/deps/libunicode_bidi-40fbbf2918c302af.rlib\"</span> <span class=\"token string\">\"/private/var/folders/pn/cxqkjl412hx7gztrg41kc_jr0000gn/T/cargo-installZb1ySO/release/deps/libform_urlencoded-5f4dba9f52310a29.rlib\"</span> <span class=\"token string\">\"/private/var/folders/pn/cxqkjl412hx7gztrg41kc_jr0000gn/T/cargo-installZb1ySO/release/deps/libpercent_encoding-5afb5c2b817fe057.rlib\"</span> <span class=\"token string\">\"/private/var/folders/pn/cxqkjl412hx7gztrg41kc_jr0000gn/T/cargo-installZb1ySO/release/deps/libdotenvy-97b4442a42df4d1f.rlib\"</span> <span class=\"token string\">\"/private/var/folders/pn/cxqkjl412hx7gztrg41kc_jr0000gn/T/cargo-installZb1ySO/release/deps/libchrono-63ff5a300c6f24e8.rlib\"</span> <span class=\"token string\">\"/private/var/folders/pn/cxqkjl412hx7gztrg41kc_jr0000gn/T/cargo-installZb1ySO/release/deps/libiana_time_zone-fb15530a0064981f.rlib\"</span> <span class=\"token string\">\"/private/var/folders/pn/cxqkjl412hx7gztrg41kc_jr0000gn/T/cargo-installZb1ySO/release/deps/libcore_foundation_sys-7ea2712e9dbf86df.rlib\"</span> <span class=\"token string\">\"/private/var/folders/pn/cxqkjl412hx7gztrg41kc_jr0000gn/T/cargo-installZb1ySO/release/deps/libnum_integer-b420368cbdeff91a.rlib\"</span> <span class=\"token string\">\"/private/var/folders/pn/cxqkjl412hx7gztrg41kc_jr0000gn/T/cargo-installZb1ySO/release/deps/libnum_traits-1ce5976b91856d9c.rlib\"</span> <span class=\"token string\">\"/private/var/folders/pn/cxqkjl412hx7gztrg41kc_jr0000gn/T/cargo-installZb1ySO/release/deps/libserde_regex-a0753353ad59f5f3.rlib\"</span> <span class=\"token string\">\"/private/var/folders/pn/cxqkjl412hx7gztrg41kc_jr0000gn/T/cargo-installZb1ySO/release/deps/libregex-da7ec6fdaa0258a5.rlib\"</span> <span class=\"token string\">\"/private/var/folders/pn/cxqkjl412hx7gztrg41kc_jr0000gn/T/cargo-installZb1ySO/release/deps/libaho_corasick-b379d46d5fede9f8.rlib\"</span> <span class=\"token string\">\"/private/var/folders/pn/cxqkjl412hx7gztrg41kc_jr0000gn/T/cargo-installZb1ySO/release/deps/libmemchr-c3b4583b4e4f5328.rlib\"</span> <span class=\"token string\">\"/private/var/folders/pn/cxqkjl412hx7gztrg41kc_jr0000gn/T/cargo-installZb1ySO/release/deps/libregex_syntax-9c95497e10cc741c.rlib\"</span> <span class=\"token string\">\"/private/var/folders/pn/cxqkjl412hx7gztrg41kc_jr0000gn/T/cargo-installZb1ySO/release/deps/libheck-03b7bff160cac4e0.rlib\"</span> <span class=\"token string\">\"/private/var/folders/pn/cxqkjl412hx7gztrg41kc_jr0000gn/T/cargo-installZb1ySO/release/deps/libclap_complete-a5ce2a6501ceda46.rlib\"</span> <span class=\"token string\">\"/private/var/folders/pn/cxqkjl412hx7gztrg41kc_jr0000gn/T/cargo-installZb1ySO/release/deps/libdiesel_migrations-3a884e86bab1e6a4.rlib\"</span> <span class=\"token string\">\"/private/var/folders/pn/cxqkjl412hx7gztrg41kc_jr0000gn/T/cargo-installZb1ySO/release/deps/libmigrations_internals-ac23e3ef67b67a6d.rlib\"</span> <span class=\"token string\">\"/private/var/folders/pn/cxqkjl412hx7gztrg41kc_jr0000gn/T/cargo-installZb1ySO/release/deps/libtoml-bf33cb2ab37e1388.rlib\"</span> <span class=\"token string\">\"/private/var/folders/pn/cxqkjl412hx7gztrg41kc_jr0000gn/T/cargo-installZb1ySO/release/deps/libdiesel-ce44bd1ae68f9a2e.rlib\"</span> <span class=\"token string\">\"/private/var/folders/pn/cxqkjl412hx7gztrg41kc_jr0000gn/T/cargo-installZb1ySO/release/deps/libitoa-0349435020d4ed83.rlib\"</span> <span class=\"token string\">\"/private/var/folders/pn/cxqkjl412hx7gztrg41kc_jr0000gn/T/cargo-installZb1ySO/release/deps/libbyteorder-802bfcbcf964bcb4.rlib\"</span> <span class=\"token string\">\"/private/var/folders/pn/cxqkjl412hx7gztrg41kc_jr0000gn/T/cargo-installZb1ySO/release/deps/libpq_sys-84c3b871630f41bb.rlib\"</span> <span class=\"token string\">\"/private/var/folders/pn/cxqkjl412hx7gztrg41kc_jr0000gn/T/cargo-installZb1ySO/release/deps/libclap-98c42516b1f4ad73.rlib\"</span> <span class=\"token string\">\"/private/var/folders/pn/cxqkjl412hx7gztrg41kc_jr0000gn/T/cargo-installZb1ySO/release/deps/libatty-ab585f2378d13500.rlib\"</span> <span class=\"token string\">\"/private/var/folders/pn/cxqkjl412hx7gztrg41kc_jr0000gn/T/cargo-installZb1ySO/release/deps/liblibc-bcd0d23c654abc71.rlib\"</span> <span class=\"token string\">\"/private/var/folders/pn/cxqkjl412hx7gztrg41kc_jr0000gn/T/cargo-installZb1ySO/release/deps/libstrsim-b7418aae77f9e588.rlib\"</span> <span class=\"token string\">\"/private/var/folders/pn/cxqkjl412hx7gztrg41kc_jr0000gn/T/cargo-installZb1ySO/release/deps/libtermcolor-4fa4f55d0a0f00f8.rlib\"</span> <span class=\"token string\">\"/private/var/folders/pn/cxqkjl412hx7gztrg41kc_jr0000gn/T/cargo-installZb1ySO/release/deps/libtextwrap-b2adb803bfb32e09.rlib\"</span> <span class=\"token string\">\"/private/var/folders/pn/cxqkjl412hx7gztrg41kc_jr0000gn/T/cargo-installZb1ySO/release/deps/libclap_lex-61b1bf896becb1c3.rlib\"</span> <span class=\"token string\">\"/private/var/folders/pn/cxqkjl412hx7gztrg41kc_jr0000gn/T/cargo-installZb1ySO/release/deps/libos_str_bytes-5a6018787520e205.rlib\"</span> <span class=\"token string\">\"/private/var/folders/pn/cxqkjl412hx7gztrg41kc_jr0000gn/T/cargo-installZb1ySO/release/deps/libindexmap-57367f7020eef4ef.rlib\"</span> <span class=\"token string\">\"/private/var/folders/pn/cxqkjl412hx7gztrg41kc_jr0000gn/T/cargo-installZb1ySO/release/deps/libhashbrown-831e13c2573370f0.rlib\"</span> <span class=\"token string\">\"/private/var/folders/pn/cxqkjl412hx7gztrg41kc_jr0000gn/T/cargo-installZb1ySO/release/deps/libbitflags-6ecef0dae46827bd.rlib\"</span> <span class=\"token string\">\"/private/var/folders/pn/cxqkjl412hx7gztrg41kc_jr0000gn/T/cargo-installZb1ySO/release/deps/libserde-a421364d321d833f.rlib\"</span> <span class=\"token string\">\"/usr/local/Cellar/rust/1.65.0/lib/rustlib/x86_64-apple-darwin/lib/libstd-bc8ff4ffc651cdd0.rlib\"</span> <span class=\"token string\">\"/usr/local/Cellar/rust/1.65.0/lib/rustlib/x86_64-apple-darwin/lib/libpanic_unwind-7a2d63bd4dfde9f5.rlib\"</span> <span class=\"token string\">\"/usr/local/Cellar/rust/1.65.0/lib/rustlib/x86_64-apple-darwin/lib/libobject-c4cbfc4de5d62b44.rlib\"</span> <span class=\"token string\">\"/usr/local/Cellar/rust/1.65.0/lib/rustlib/x86_64-apple-darwin/lib/libmemchr-273e901569ea2b89.rlib\"</span> <span class=\"token string\">\"/usr/local/Cellar/rust/1.65.0/lib/rustlib/x86_64-apple-darwin/lib/libaddr2line-9e1a922f947faa3e.rlib\"</span> <span class=\"token string\">\"/usr/local/Cellar/rust/1.65.0/lib/rustlib/x86_64-apple-darwin/lib/libgimli-d5dad5a620cd00b2.rlib\"</span> <span class=\"token string\">\"/usr/local/Cellar/rust/1.65.0/lib/rustlib/x86_64-apple-darwin/lib/librustc_demangle-476428cc6e58bf63.rlib\"</span> <span class=\"token string\">\"/usr/local/Cellar/rust/1.65.0/lib/rustlib/x86_64-apple-darwin/lib/libstd_detect-9056f50d5068726a.rlib\"</span> <span class=\"token string\">\"/usr/local/Cellar/rust/1.65.0/lib/rustlib/x86_64-apple-darwin/lib/libhashbrown-9423c29ffb50e18d.rlib\"</span> <span class=\"token string\">\"/usr/local/Cellar/rust/1.65.0/lib/rustlib/x86_64-apple-darwin/lib/libminiz_oxide-99327f53244a5bed.rlib\"</span> <span class=\"token string\">\"/usr/local/Cellar/rust/1.65.0/lib/rustlib/x86_64-apple-darwin/lib/libadler-76c10a3397f72e07.rlib\"</span> <span class=\"token string\">\"/usr/local/Cellar/rust/1.65.0/lib/rustlib/x86_64-apple-darwin/lib/librustc_std_workspace_alloc-be159387752937aa.rlib\"</span> <span class=\"token string\">\"/usr/local/Cellar/rust/1.65.0/lib/rustlib/x86_64-apple-darwin/lib/libunwind-44b94b1ae9d72f63.rlib\"</span> <span class=\"token string\">\"/usr/local/Cellar/rust/1.65.0/lib/rustlib/x86_64-apple-darwin/lib/libcfg_if-88d8fb851c129081.rlib\"</span> <span class=\"token string\">\"/usr/local/Cellar/rust/1.65.0/lib/rustlib/x86_64-apple-darwin/lib/liblibc-7ec8672b2c885580.rlib\"</span> <span class=\"token string\">\"/usr/local/Cellar/rust/1.65.0/lib/rustlib/x86_64-apple-darwin/lib/liballoc-b454c2b861412f9d.rlib\"</span> <span class=\"token string\">\"/usr/local/Cellar/rust/1.65.0/lib/rustlib/x86_64-apple-darwin/lib/librustc_std_workspace_core-d7c646667e888ac3.rlib\"</span> <span class=\"token string\">\"/usr/local/Cellar/rust/1.65.0/lib/rustlib/x86_64-apple-darwin/lib/libcore-d6568ca71248fcbd.rlib\"</span> <span class=\"token string\">\"/usr/local/Cellar/rust/1.65.0/lib/rustlib/x86_64-apple-darwin/lib/libcompiler_builtins-63b581045c174632.rlib\"</span> <span class=\"token string\">\"-framework\"</span> <span class=\"token string\">\"CoreFoundation\"</span> <span class=\"token string\">\"-lpq\"</span> <span class=\"token string\">\"-liconv\"</span> <span class=\"token string\">\"-lSystem\"</span> <span class=\"token string\">\"-lresolv\"</span> <span class=\"token string\">\"-lc\"</span> <span class=\"token string\">\"-lm\"</span> <span class=\"token string\">\"-liconv\"</span> <span class=\"token string\">\"-L\"</span> <span class=\"token string\">\"/usr/local/Cellar/rust/1.65.0/lib/rustlib/x86_64-apple-darwin/lib\"</span> <span class=\"token string\">\"-o\"</span> <span class=\"token string\">\"/var/folders/pn/cxqkjl412hx7gztrg41kc_jr0000gn/T/cargo-installZb1ySO/release/deps/diesel-2239d0258e7baf20\"</span> <span class=\"token string\">\"-Wl,-dead_strip\"</span> <span class=\"token string\">\"-nodefaultlibs\"</span>\n  <span class=\"token operator\">=</span> note: ld: library not found <span class=\"token keyword\">for</span> <span class=\"token parameter variable\">-lpq</span>\n          clang: error: linker <span class=\"token builtin class-name\">command</span> failed with <span class=\"token builtin class-name\">exit</span> code <span class=\"token number\">1</span> <span class=\"token punctuation\">(</span>use <span class=\"token parameter variable\">-v</span> to see invocation<span class=\"token punctuation\">)</span>\n\n\nerror: could not compile <span class=\"token variable\"><span class=\"token variable\">`</span>diesel_cli<span class=\"token variable\">`</span></span> due to previous error\nerror: failed to compile <span class=\"token variable\"><span class=\"token variable\">`</span>diesel_cli v2.0.1<span class=\"token variable\">`</span></span>, intermediate artifacts can be found at <span class=\"token variable\"><span class=\"token variable\">`</span>/var/folders/pn/cxqkjl412hx7gztrg41kc_jr0000gn/T/cargo-installZb1ySO<span class=\"token variable\">`</span></span></code></pre></div>\n<h3 id=\"해결-방법1\" style=\"position:relative;\"><a href=\"#%ED%95%B4%EA%B2%B0-%EB%B0%A9%EB%B2%951\" aria-label=\"해결 방법1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>해결 방법1</h3>\n<p><code class=\"language-text\">error: linking with </code>cc<code class=\"language-text\"> failed: exit status: 1</code>라는 오류 메시지가 표출 되는 것을 보게 되었습니다.<br>\n<code class=\"language-text\">cc</code> 관련 오류로 인해서 <code class=\"language-text\">xcode-select</code>를 삭제 후 다시 설치하였습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ xcode-select <span class=\"token parameter variable\">--install</span>\nxcode-select: error: <span class=\"token builtin class-name\">command</span> line tools are already installed, use “Software Update” to <span class=\"token function\">install</span> updates\n$ <span class=\"token function\">sudo</span> <span class=\"token function\">rm</span> <span class=\"token parameter variable\">-rf</span> /Library/Developer/CommandLineTools\n$ <span class=\"token function\">sudo</span> xcode-selete <span class=\"token parameter variable\">--install</span></code></pre></div>\n<p><strong>하지만 해결되지 않았습니다.</strong> 해결 되지 않아서 커뮤니티에 도움을 요청 했습니다.</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/28124221/error-linking-with-cc-failed-exit-code-1\">error-linking-with-cc-failed-exit-code-1</a></li>\n<li><a href=\"https://investechnews.com/2021/06/15/mac-commandlinetools-setup-error/\">Mac CommandLineTools 설치와 오류 해결 방법 – xcode-select: error: command line tools are already installed, use “Software Update” to install updates</a></li>\n</ul>\n<h2 id=\"해결-방법2\" style=\"position:relative;\"><a href=\"#%ED%95%B4%EA%B2%B0-%EB%B0%A9%EB%B2%952\" aria-label=\"해결 방법2 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>해결 방법2</h2>\n<p>제가 코드를 만들면서 큰 실수 하나를 했습니다. postgres를 설치하지 않고 관련 패키지를 설치하려고 했습니다.<br>\n제가 자주 보고 도움을 받는 코딩맛집 커뮤니티에 제 상황을 올리게 되었습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.77777777777777%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABn0lEQVQoz41T2U7kMBDMJ7GwkEkmce47jnNMDgTDA///D4WqJ1mBtBLzUOr2Vd12la3WzGjaAVUzIE5r+EGGkxvi7MdwvUjykxvsMZT1OK0QRAWCKIcKc4RxAU+lss+KkhJdf0FRdUKc5g3K2kjOuSDMhVyFmSCMSyRZI5HrdTug1ZPMOecIlqcS5IWWSiSP4nLvopYxD5KQm9mB7Si8nJTkrhfLXhVkkttOAItEw7ih7SZoM8MMC9rugq6fYfpFqp/9BM+2LwdIdkSC88QxtniNzsxCKNCTEDI2mkUu8PzkH9FvkA71Tqh3IkYSybye5MHvJnS8GJUIYJCXHaKkEtze8Kam7YT3E0YqgWP7Yomn5zMe/7oSiYdHB3+e3B/v9xuxtY0LTNujn7abXfQoVqAved00b0WUezoUUXilstRI0lrISFrW/R6NXJmW+a7o/3AUtKb5DaMe0JkLskLLLxA/7m9JozPSDeyUviMolNrz43dJhxRi2T7wdv3Eul3RjyuGacOyXbGs75jXd6yvH8iKVkxOsQ7BWIz58UtI+AUgV6pY7dAmrwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"01\"\n        title=\"01\"\n        src=\"/static/5fed05df1f924b64ffc8a290bc3fd589/37523/01.png\"\n        srcset=\"/static/5fed05df1f924b64ffc8a290bc3fd589/e9ff0/01.png 180w,\n/static/5fed05df1f924b64ffc8a290bc3fd589/f21e7/01.png 360w,\n/static/5fed05df1f924b64ffc8a290bc3fd589/37523/01.png 720w,\n/static/5fed05df1f924b64ffc8a290bc3fd589/302a4/01.png 1080w,\n/static/5fed05df1f924b64ffc8a290bc3fd589/07a9c/01.png 1440w,\n/static/5fed05df1f924b64ffc8a290bc3fd589/69d6b/01.png 1912w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token operator\">=</span> note: ld: library not found <span class=\"token keyword\">for</span> <span class=\"token parameter variable\">-lpq</span>\n        clang: error: linker <span class=\"token builtin class-name\">command</span> failed with <span class=\"token builtin class-name\">exit</span> code <span class=\"token number\">1</span> <span class=\"token punctuation\">(</span>use <span class=\"token parameter variable\">-v</span> to see invocation<span class=\"token punctuation\">)</span></code></pre></div>\n<p><code class=\"language-text\">lpq</code>는 postgres 라이브러리 중 하나라는 사실를 알게 되었으며, postgres 설치를 하지 않아서 벌어지는 오류라는 사실을 알게 되었습니다.<br>\n<strong>postgres를 설치해서 해결 하였습니다.</strong> 오류 해결에 도움을 주신 박박사님 감사합니다 :)<br>\n다음부터는 오류 발생 시 메시지를 꼼꼼히 읽고 해결해 보겠습니다…!</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ brew <span class=\"token function\">install</span> postgres</code></pre></div>\n<ul>\n<li><a href=\"https://askubuntu.com/questions/1148609/usr-bin-ld-cannot-find-lpq\">/usr/bin/ld: cannot find -lpq</a></li>\n</ul>","frontmatter":{"date":"December 07, 2022","title":"Rust 오류 해결법","categories":"Rust","author":"HyunSang Park","emoji":"🧰"},"fields":{"slug":"/rust-error-solution/"}},"site":{"siteMetadata":{"siteUrl":"https://www.zoomkoding.com","comments":{"utterances":{"repo":"dev-hyunsang/dev-hyunsang.github.io"}}}}},"pageContext":{"slug":"/consideration-of-code-structure/","nextSlug":"/golang-and-memory/","prevSlug":"/rust-error-solution/"}},"staticQueryHashes":["1073350324","1956554647","2938748437"]}